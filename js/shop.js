const shop = [
  { 
    id: "101", 
    value: "Accessories",
    type: "Mouse",
    name: "XPG INFAREX M10",
    review: "68",
    price: "$18.00",
    price2: "$20.00",
    star1: "fa-solid fa-star",
    star2: "fa-solid fa-star",
    star3: "fa-solid fa-star",
    img: "img/offer/offer_1.png",
    img1: "",
    img2: "",
    img3: "",
    img4: "",
    img5: "",
  },
  { 
    id: "102",
    value: "Accessories",
    type: "Headphones",
    name: "Logitech G PRO X",
    review: "50",
    price: "$180.00 ",
    price2: "$200.00",
    star1: "fa-solid fa-star",
    star2: "fa-solid fa-star",
    star3: "fa-regular fa-star",
    img: "img/offer/offer_2.png",
    img1: "",
    img2: "",
    img3: "",
    img4: "",
    img5: "",
  },
  {
    id: "103",
    value: "Hardware",
    type: "Memory",
    name: "XPG D60G RGB 16GB",
    review: "36",
    price: "$60.00",
    price2: "$75.00",
    star1: "fa-solid fa-star",
    star2: "fa-solid fa-star",
    star3: "fa-solid fa-star",
    img: "img/offer/offer_3.png",
    img1: "",
    img2: "",
    img3: "",
    img4: "",
    img5: "",
  },
  { 
    id: "104",
    value: "Hardware",
    type: "Mother Board",
    name: "Asus Rog Strix Z790",
    review: "12",
    price: "$350.00",
    price2: "$390.00",
    star1: "fa-solid fa-star",
    star2: "fa-regular fa-star",
    star3: "fa-regular fa-star",
    img: "img/offer/offer_4.png",
    img1: "",
    img2: "",
    img3: "",
    img4: "",
    img5: "",
  },
  { 
    id: "105",
    value: "Hardware",
    type: "Procesor",
    name: "Intel i9-12900KS",
    review: "3",
    price: "$799.00",
    price2: "$930.00",
    star1: "fa-solid fa-star",
    star2: "fa-regular fa-star",
    star3: "fa-regular fa-star",
    img: "img/offer/offer_5.png",
    img1: "",
    img2: "",
    img3: "",
    img4: "",
    img5: "",
  },
  { 
    id: "106",
    value: "Other",
    type: "Monitor",
    name: "Msi G244F24 170HZ",
    review: "23",
    price: "$205.00",
    price2: "$240.00",
    star1: "fa-solid fa-star",
    star2: "fa-solid fa-star",
    star3: "fa-regular fa-star",
    img: "img/offer/offer_6.png",    
    img2: "",
    img3: "",
    img4: "",
    img5: "",
  },
  { 
    id: "107",
    value: "Accessories",
    type: "Watches",
    name: "Xiaomi Mi Band 5",
    review: "40",
    price: "$199.00",
    price2: "$250.00",
    star1: "fa-solid fa-star",
    star2: "fa-regular fa-star",
    star3: "fa-regular fa-star",
    img: "img/Products/product-1.png",
    img1: "",
    img2: "",
    img3: "",
    img4: "",
    img5: "",
  },
  { 
    id: "108",
    value: "Accessories",
    type: "Speaker",
    name: "Big Power Speaker",
    review: "50",
    price: "$275.00 ",
    price2: "$320.00",
    star1: "fa-solid fa-star",
    star2: "fa-solid fa-star-half-stroke",
    star3: "fa-regular fa-star",
    img: "img/Products/product-2.png",
    img1: "",
    img2: "",
    img3: "",
    img4: "",
    img5: "",
  },
  { 
    id: "109",
    value: "Other",
    type: "Camera",
    name: "WiFi Security Camera",
    review: "36",
    price: "$399.00",
    price2: "$460.00",
    star1: "fa-solid fa-star",
    star2: "fa-regular fa-star",
    star3: "fa-regular fa-star",
    img: "img/Products/product-3.png",
    img1: "",
    img2: "",
    img3: "",
    img4: "",
    img5: "",
  },
  { 
    id: "110",
    value: "Other",
    type: "Phones",
    name: "iphone 6x plus",
    review: "67",
    price: "$400.00",
    price2: "$460.00",
    star1: "fa-solid fa-star",
    star2: "fa-solid fa-star",
    star3: "fa-regular fa-star",
    img: "img/Products/product-4.png",
    img1: "",
    img2: "",
    img3: "",
    img4: "",
    img5: "",
  },
  {
    id: "111",
    value: "Accessories",
    type: "Speaker",
    name: "Mini Speaker",
    review: "22",
    price: "$70.00",
    price2: "$100.00",
    star1: "fa-solid fa-star",
    star2: "fa-solid fa-star-half-stroke",
    star3: "fa-regular fa-star",
    img: "img/Products/product-6.png",
    img1: "",
    img2: "",
    img3: "",
    img4: "",
    img5: "",
  },
  { 
    id: "112",
    value: "Accessories",
    type: "Headphones",
    name: "Wireless Headphones",
    review: "27",
    price: "$350.00",
    price2: "$390.00",
    star1: "fa-solid fa-star",
    star2: "fa-regular fa-star",
    star3: "fa-regular fa-star",
    img: "img/Products/product-5.png",
    img1: "",
    img2: "",
    img3: "",
    img4: "",
    img5: "",
  },
  { 
    id: "113",
    value: "Other",
    type: "Laptop",
    name: "Apple MacBook Air",
    review: "14",
    price: "$899.00",
    price2: "$1100.00",
    star1: "fa-solid fa-star",
    star2: "fa-solid fa-star",
    star3: " fa-regular fa-star",
    img: "img/Products/product-8.png",
    img1: "",
    img2: "",
    img3: "",
    img4: "",
    img5: "",
  },
  { 
    id: "114", 
    value: "Other",
    type: "Drone",
    name: "GoPro Karma Crone",
    review: "08",
    price: "$850.00",
    price2: "$1000.00",
    star1: "fa-solid fa-star",
    star2: "fa-solid fa-star",
    star3: "fa-solid fa-star",
    img: "img/single shop/drone-0.png",
    img1: "",
    img2: "",
    img3: "",
    img4: "",
    img5: "",
  }
];

let shopCards = document.querySelector(".shop .shop-all .cards");
function rednderShop() {
  let shopItems = shop
    .map((x) => {
      let {id, value, type, name, review, price, price2, star1, star2, star3, img, img1, img2, img3, img4, img5} = x;
      return `
      <div id="product-id-${id}" data-category=""  data-price="" class="main-card">
        <div class="image">
          <img src="${img}" alt="">
          <button onclick="incrementcart(${id})" class="main-buttom">
            <i class="bi bi-cart2"></i>
            Add To Cart
          </button>
        </div>
        <div class="holder">
          <strong>${value}</strong>
          <p>${type}</p>
          <a href="product.html"><h3>${name}</h3></a>
          <div class="review">
            <div class="stars">
              <i class="${star1}"></i>
              <i class="${star1}"></i>
              <i class="${star1}"></i>
              <i class="${star2}"></i>
              <i class="${star3}"></i>
            </div>
            <p>${review} Review</p>
          </div>
          <p class="ptext">Lorem ipsum dolor, sit amet consectetur adipisicing elit. Possimus nesciunt illo temporibus dolor. Labore ducimus, quia modi, impedit dolore voluptatem ad ipsum hic eos in officiis natus et enim. Distinctio?</p>
        </div>
        <h4>${price}</h4>
      </div>
    `;
    })
    .join("");
  shopCards.innerHTML = shopItems;
}
rednderShop();

let gridImage = document.querySelectorAll(".shop .main-card .image");
let gridcards = document.querySelectorAll(".shop .main-card")
let select = document.querySelectorAll(".shop .shop-all select")
let gridIcons = document.querySelectorAll(".shop-all .grids i");
let ptnUl = document.querySelector(".ptn-ul");
let ar = [];

function ulActive() {
  ptnUl.classList.toggle("active");
}

gridIcons[0].classList.add("active");

gridIcons[0].addEventListener("click", () => {
  gridIcons[0].classList.add("active");
  gridIcons[1].classList.remove("active");
  shopCards.classList.remove("list-system");
  gridcards.forEach((card) => {
    card.classList.remove("list-system");
  });
  gridImage.forEach((img) => {
    img.classList.remove("list-system");
  });
});
gridIcons[1].addEventListener("click", () => {
  gridIcons[1].classList.add("active");
  gridIcons[0].classList.remove("active");
  shopCards.classList.add("list-system");
  gridcards.forEach((card) => {
    card.classList.add("list-system");
  });
  gridImage.forEach((img) => {
    img.classList.add("list-system");
  });
})





let indicator = document.querySelectorAll(".indicator li")
let indicatorIco = document.querySelectorAll(".indicator i")
// gridcards



for (i of gridcards) {
  const value = i.querySelector("strong")
  const x = value.textContent
  i.setAttribute("data-category", x)
}

for (let i = 0; i< indicator.length; i++) {
  indicator[i].onclick = function() {
    for(let x = 0; x < indicator.length; x++) {
      indicator[x].classList.remove("active")
      
    }
    this.classList.add("active")

    const displayItems = this.getAttribute('data-filter');

    for (let z = 0; z < gridcards.length; z++) {

        gridcards[z].style.display = "none";

      if (gridcards[z].getAttribute("data-category") == displayItems || displayItems == "All") {
          gridcards[z].style.cssText = "display: flex; flex-direction: column";
      }
    }
  };
}



  function SortProduct() {
    for (let i of gridcards) {
      const last = i.lastElementChild;
      const x = last.textContent.trim();
      const y = Number(x.substring(1));
      i.setAttribute("data-price", y);
      ar.push(i);
    }
    

      select.onchange = sortingValue;

    function sortingValue() {
      if (this.value === "Default") {
        while (shopCards.firstChild) {
          shopCards.removeChild(shopCards.firstChild);
        }
        shopCards.append(...ar);
      }
      if (this.value === "LowToHigh") {
        SortElem(shopCards, gridcards, true);
      }
      if (this.value === "HighToLow") {
        SortElem(shopCards, gridcards, false);
      }
    }
    function SortElem(shopCards, gridcards, asc) {
      let dm, sortli;
      dm = asc ? 1 : -1;
      sortli = gridcards.sort((a, b) => {
        const ax = a.getAttribute("data-price");
        const bx = b.getAttribute("data-price");
        return ax > bx ? 1 * dm : -1 * dm;
      });
      while (shopCards.firstChild) {
        shopCards.removeChild(shopCards.firstChild);
      }
      shopCards.append(...sortli);
    }
  }






  const rangeInput = document.querySelectorAll(".range-input input"),
  priceInput = document.querySelectorAll(".price-input input"),
  range = document.querySelector(".slider .progress");
  let priceGap = 1000;
  
  priceInput.forEach(input =>{
      input.addEventListener("input", e =>{
          let minPrice = parseInt(priceInput[0].value),
          maxPrice = parseInt(priceInput[1].value);
          
          if((maxPrice - minPrice >= priceGap) && maxPrice <= rangeInput[1].max){
              if(e.target.className === "input-min"){
                  rangeInput[0].value = minPrice;
                  range.style.left = ((minPrice / rangeInput[0].max) * 100) + "%";
              }else{
                  rangeInput[1].value = maxPrice;
                  range.style.right = 100 - (maxPrice / rangeInput[1].max) * 100 + "%";
              }
          }
      });
  });
  
  rangeInput.forEach(input =>{
      input.addEventListener("input", e =>{
          let minVal = parseInt(rangeInput[0].value),
          maxVal = parseInt(rangeInput[1].value);
  
          if((maxVal - minVal) < priceGap){
              if(e.target.className === "range-min"){
                  rangeInput[0].value = maxVal - priceGap
              }else{
                  rangeInput[1].value = minVal + priceGap;
              }
          }else{
              priceInput[0].value = minVal;
              priceInput[1].value = maxVal;
              range.style.left = ((minVal / rangeInput[0].max) * 100) + "%";
              range.style.right = 100 - (maxVal / rangeInput[1].max) * 100 + "%";
          }
      });
  });



  